<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>FileSystemOptionBuilder.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">LessCSS Compiler</a> &gt; <a href="index.source.html" class="el_package">biz.gabrys.lesscss.compiler2</a> &gt; <span class="el_source">FileSystemOptionBuilder.java</span></div><h1>FileSystemOptionBuilder.java</h1><pre class="source lang-java linenums">/*
 * LessCSS Compiler
 * http://lesscss-compiler.projects.gabrys.biz/
 *
 * Copyright (c) 2015 Adam Gabrys
 *
 * This file is licensed under the BSD 3-Clause (the &quot;License&quot;).
 * You may not use this file except in compliance with the License.
 * You may obtain:
 *  - a copy of the License at project page
 *  - a template of the License at https://opensource.org/licenses/BSD-3-Clause
 */
package biz.gabrys.lesscss.compiler2;

import java.util.LinkedHashMap;
import java.util.Map;
import java.util.Map.Entry;

import biz.gabrys.lesscss.compiler2.filesystem.FileSystem;
import biz.gabrys.lesscss.compiler2.util.StringUtils;

/**
 * &lt;p&gt;
 * Responsible for creating new instances of {@link FileSystemOption}.
 * &lt;/p&gt;
 * &lt;p&gt;
 * Example code:
 * &lt;/p&gt;
 * 
 * &lt;pre&gt;
 * {@link FileSystemOption} fileSystem;
 * // create a file system with no parameters
 * fileSystem = new {@link #FileSystemOptionBuilder() FileSystemOptionBuilder}().{@link #withClass(String) withClass}(&quot;org.example.FileSystem&quot;).{@link #build() build}();
 * 
 * // create a file system with parameters
 * Map&amp;lt;String, String&amp;gt; parameters = new HashMap&amp;lt;String, String&amp;gt;();
 * parameters.put(&quot;param1&quot;, &quot;value1&quot;);
 * parameters.put(&quot;param2&quot;, &quot;value2&quot;);
 * fileSystem = new {@link #FileSystemOptionBuilder() FileSystemOptionBuilder}() //
 *                      .{@link #withClass(Class) withClass}(org.example.FileSystem.class) //
 *                      .{@link #appendParameters(Map) appendParameters}(parameters) //
 *                      .{@link #appendParameter(CharSequence, CharSequence) appendParameter}(&quot;param3&quot;, &quot;value3&quot;) //
 *                      .{@link #build() build}();
 * &lt;/pre&gt;
 * 
 * @see FileSystemOptionsBuilder
 * @see LessOptions
 */
public class FileSystemOptionBuilder {

    private String className;
<span class="fc" id="L52">    private final Map&lt;String, String&gt; parameters = new LinkedHashMap&lt;String, String&gt;();</span>

    /**
     * Constructs a new instance.
     * @since 2.0.0
     */
<span class="fc" id="L58">    public FileSystemOptionBuilder() {</span>
        // do nothing
<span class="fc" id="L60">    }</span>

    /**
     * Sets a file system class name.
     * @param className the file system class name (cannot be blank).
     * @return {@code this} builder.
     * @throws IllegalArgumentException if the file system class name is blank.
     * @since 2.0.0
     * @see #withClass(Class)
     */
    public FileSystemOptionBuilder withClass(final String className) {
<span class="fc bfc" id="L71" title="All 2 branches covered.">        if (StringUtils.isBlank(className)) {</span>
<span class="fc" id="L72">            throw new IllegalArgumentException(&quot;Class name cannot be blank&quot;);</span>
        }
<span class="fc" id="L74">        this.className = className;</span>
<span class="fc" id="L75">        return this;</span>
    }

    /**
     * Sets a file system class.
     * @param clazz the file system class (cannot be {@code null}).
     * @return {@code this} builder.
     * @throws IllegalArgumentException if the file system class is {@code null}.
     * @since 2.0.0
     * @see #withClass(String)
     */
    public FileSystemOptionBuilder withClass(final Class&lt;? extends FileSystem&gt; clazz) {
<span class="fc bfc" id="L87" title="All 2 branches covered.">        if (clazz == null) {</span>
<span class="fc" id="L88">            throw new IllegalArgumentException(&quot;Class cannot be null&quot;);</span>
        }
<span class="fc" id="L90">        className = clazz.getName();</span>
<span class="fc" id="L91">        return this;</span>
    }

    /**
     * Appends file system parameters.
     * @param parameters the map with parameters (cannot be {@code null}).
     * @return {@code this} builder.
     * @throws IllegalArgumentException if the parameters map or any parameter name is {@code null}.
     * @since 2.0.0
     * @see #appendParameter(CharSequence, CharSequence)
     */
    public FileSystemOptionBuilder appendParameters(final Map&lt;? extends CharSequence, ? extends CharSequence&gt; parameters) {
<span class="fc bfc" id="L103" title="All 2 branches covered.">        if (parameters == null) {</span>
<span class="fc" id="L104">            throw new IllegalArgumentException(&quot;Paremeters cannot be null&quot;);</span>
        }
<span class="fc bfc" id="L106" title="All 2 branches covered.">        for (final Entry&lt;? extends CharSequence, ? extends CharSequence&gt; parameter : parameters.entrySet()) {</span>
<span class="fc" id="L107">            appendParameter(parameter.getKey(), parameter.getValue());</span>
<span class="fc" id="L108">        }</span>
<span class="fc" id="L109">        return this;</span>
    }

    /**
     * Appends a file system parameter.
     * @param name the parameter name (cannot be {@code null}).
     * @param value the parameter value.
     * @return {@code this} builder.
     * @throws IllegalArgumentException if the parameters name is {@code null}.
     * @since 2.0.0
     * @see #appendParameters(Map)
     */
    public FileSystemOptionBuilder appendParameter(final CharSequence name, final CharSequence value) {
<span class="fc bfc" id="L122" title="All 2 branches covered.">        if (name == null) {</span>
<span class="fc" id="L123">            throw new IllegalArgumentException(&quot;Parameter name cannot be null&quot;);</span>
        }
<span class="fc" id="L125">        parameters.put(name.toString(), StringUtils.toStringIfNotNull(value));</span>
<span class="fc" id="L126">        return this;</span>
    }

    /**
     * Builds a new file system option.
     * @return the file system option.
     * @throws BuilderCreationException if withClass method has not been called before this method.
     * @since 2.0.0
     * @see #withClass(Class)
     * @see #withClass(String)
     */
    public FileSystemOption build() {
<span class="fc bfc" id="L138" title="All 2 branches covered.">        if (className == null) {</span>
<span class="fc" id="L139">            throw new BuilderCreationException(&quot;withClass method has not been called before build method&quot;);</span>
        }
<span class="fc" id="L141">        return new FileSystemOption(className, parameters);</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.1.201803210924</span></div></body></html>